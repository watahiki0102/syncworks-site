# Trucks API 動作確認 簡易チェックリスト

## 事前準備

1. 開発サーバーを起動
   ```bash
   npm run dev
   ```

2. データベースにテスト用の業者データが存在することを確認
   - `company_id`: `11111111-1111-1111-1111-111111111111` が存在すること

3. ブラウザで `/admin/login` にアクセスしてログイン

---

## 基本動作確認（必須）

### ✅ 1. 画面表示
- [ ] `/admin/dispatch` にアクセス
- [ ] 画面が正常に表示される
- [ ] トラック一覧が表示される（または空の状態が表示される）

### ✅ 2. トラック作成
1. 「トラック管理」タブを選択
2. 「新規登録」ボタンをクリック
3. 以下の情報を入力:
   ```
   トラック番号: TRUCK-TEST-001
   ナンバープレート: 品川 500 あ TEST1
   車種: 2t
   容量（kg）: 2000
   容量（CBM）: 10.5
   次回車検日: 2025-12-31
   保険有効期限: 2025-12-31
   ステータス: available
   ```
4. 「保存」ボタンをクリック
- [ ] トラックが作成される
- [ ] 一覧に新しいトラックが表示される
- [ ] エラーメッセージが表示されない

### ✅ 3. トラック編集
1. 作成したトラックを選択
2. 「編集」ボタンをクリック
3. トラック番号を変更: `TRUCK-TEST-001-UPDATED`
4. 「保存」ボタンをクリック
- [ ] トラック情報が更新される
- [ ] 一覧に変更が反映される

### ✅ 4. トラック削除
1. 作成したトラックを選択
2. 「削除」ボタンをクリック
3. 確認ダイアログで「OK」をクリック
- [ ] トラックが削除される
- [ ] 一覧からトラックが消える

---

## エラーケース確認

### ✅ 5. バリデーションエラー
1. トラック作成フォームを開く
2. 必須フィールド（ナンバープレートなど）を空のまま「保存」をクリック
- [ ] バリデーションエラーが表示される
- [ ] トラックが作成されない

### ✅ 6. ナンバープレート重複エラー
1. 既存のトラックと同じナンバープレートで新規作成を試みる
- [ ] エラーメッセージが表示される
- [ ] トラックが作成されない

---

## 配車カレンダー確認

### ✅ 7. カレンダー表示
1. 「配車カレンダー」タブを選択
- [ ] トラックがカレンダーに表示される
- [ ] トラック名（車種 + ナンバープレート）が表示される
- [ ] 容量（kg）が表示される

---

## ブラウザコンソール確認

### ✅ 8. エラーログ確認
1. ブラウザの開発者ツールを開く（F12）
2. 「Console」タブを選択
3. 上記の操作を実行
- [ ] エラーログが表示されない
- [ ] 警告メッセージがない

### ✅ 9. ネットワークリクエスト確認
1. ブラウザの開発者ツールを開く（F12）
2. 「Network」タブを選択
3. トラック一覧を取得
- [ ] `/api/trucks` へのリクエストが成功している（ステータス200）
- [ ] レスポンスに `success: true` が含まれている

---

## データベース確認（オプション）

### ✅ 10. データ保存確認
1. データベースに接続
2. `trucks` テーブルを確認
- [ ] 作成したトラックが保存されている
- [ ] 更新したトラックの情報が正しく保存されている
- [ ] 削除したトラックが削除されている（またはstatusが'retired'になっている）

---

## トラブルシューティング

### トラック一覧が表示されない
- ブラウザコンソールでエラーログを確認
- ネットワークタブで `/api/trucks` のリクエストを確認
- データベースに `company_id: 11111111-1111-1111-1111-111111111111` の業者が存在するか確認

### トラック作成が失敗する
- ブラウザコンソールでエラーログを確認
- ネットワークタブで `/api/trucks` のPOSTリクエストのレスポンスを確認
- 必須フィールドがすべて入力されているか確認

### エラーメッセージが表示される
- エラーメッセージの内容を確認
- ブラウザコンソールで詳細なエラーログを確認
- サーバーログを確認

---

## 完了条件

すべてのチェック項目に ✅ がついたら、基本的な動作確認は完了です。

詳細なテストパターンは `docs/testing/trucks-api-test-patterns.md` を参照してください。

